<main>
  <input type="text" id="query" placeholder="Ø§Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…" autocomplete="off" />
  <button onclick="lookup()">Ø§Ø³ØªØ¹Ù„Ø§Ù…</button>
  <div id="result"></div>
</main>

<script>
  function lookup() {
    const input = document.getElementById('query').value.trim();
    const resultDiv = document.getElementById('result');

    if (!input) {
      resultDiv.innerHTML = '<span class="error">Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¹Ø¶ÙˆÙŠØ© Ø£Ùˆ Ø§Ù„Ø§Ø³Ù…</span>';
      return;
    }

    resultDiv.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...';

    // Ù„Ùˆ ÙƒÙ„Ù‡ Ø£Ø±Ù‚Ø§Ù… = Ø±Ù‚Ù… Ø¹Ø¶ÙˆÙŠØ©ØŒ ØºÙŠØ± ÙƒØ¯Ù‡ = Ø§Ø³Ù…
    const isNumber = /^\d+$/.test(input);
    const param = isNumber ? `id=${encodeURIComponent(input)}` : `name=${encodeURIComponent(input)}`;

    fetch(`https://script.google.com/macros/s/AKfycbx2uR52ys_ax9mtOwcGgDdoojGmluP6G1XjZNg9igt4Sf_wfkyDcvGKYLayM8fyKmUyuA/exec?${param}`)
      .then(response => response.json())
      .then(data => {
        if (data.error) {
          resultDiv.innerHTML = `<span class="error">âŒ ${data.error}</span>`;
        } else {
          resultDiv.textContent = `âœ… Ø§Ù„Ø§Ø³Ù…: ${data.name}\nğŸšŒ Ø±Ù‚Ù… Ø§Ù„Ø£ØªÙˆØ¨ÙŠØ³: ${data.bus}\nğŸª‘ Ø±Ù‚Ù… Ø§Ù„ÙƒØ±Ø³ÙŠ: ${data.seat}`;
        }
      })
      .catch(() => {
        resultDiv.innerHTML = '<span class="error">Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</span>';
      });
  }
</script>
